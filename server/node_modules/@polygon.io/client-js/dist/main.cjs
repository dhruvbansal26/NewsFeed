var st=Object.create;var g=Object.defineProperty;var ot=Object.getOwnPropertyDescriptor;var nt=Object.getOwnPropertyNames;var it=Object.getPrototypeOf,at=Object.prototype.hasOwnProperty;var ut=(e,t)=>{for(var o in t)g(e,o,{get:t[o],enumerable:!0})},L=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of nt(t))!at.call(e,s)&&s!==o&&g(e,s,{get:()=>t[s],enumerable:!(r=ot(t,s))||r.enumerable});return e};var F=(e,t,o)=>(o=e!=null?st(it(e)):{},L(t||!e||!e.__esModule?g(o,"default",{value:e,enumerable:!0}):o,e)),pt=e=>L(g({},"__esModule",{value:!0}),e);var ct={};ut(ct,{cryptoClient:()=>O,default:()=>mt,forexClient:()=>v,getCryptoWebsocket:()=>S,getForexWebsocket:()=>G,getIndicesWebsocket:()=>A,getOptionsWebsocket:()=>D,getStocksWebsocket:()=>w,getWithGlobals:()=>n,indicesClient:()=>P,optionsClient:()=>T,polygonClient:()=>rt,referenceClient:()=>R,restClient:()=>Ye,snapshotOptionChain:()=>b,snapshotOptionContract:()=>x,stocksClient:()=>C,websocketClient:()=>et});module.exports=pt(ct);var E=F(require("cross-fetch"),1),U={fetch:(e,t)=>(0,E.default)(e,t)};var M=require("query-string"),_=class extends Error{constructor(o,r="",s=""){super(o);this.status=r,this.request_id=s}},n=(e,t,o={})=>async(r,s={},i={})=>{if(!e)throw new Error("API KEY not configured...");let u=(0,M.stringify)(s,{encode:!0}),p=`${t}${r}?${u}`;try{let c=await U.fetch(p,{...o,...i,headers:{...i.headers||o.headers||{},Authorization:`Bearer ${e}`}});if(c.status>=400){let $=await c.text(),q;try{let I=JSON.parse($);q=new _(I.message,I.status,I.request_id)}catch{q=new Error($)}throw q}return c?.headers?.get("content-type")==="text/csv"?c.text():c.json()}catch(c){throw c}};var W=async(e,t,o,r,s,i,u,p)=>e(`/v2/aggs/ticker/${t}/range/${o}/${r}/${s}/${i}`,u,p);var N=async(e,t,o,r)=>e(`/v2/aggs/grouped/locale/global/market/crypto/${t}`,o,r);var z=async(e,t,o,r,s,i)=>e(`/v1/open-close/crypto/${t}/${o}/${r}`,s,i);var H=async(e,t,o,r)=>e(`/v3/trades/${t}`,o,r);var j=async(e,t,o,r,s)=>e(`/v1/last/crypto/${t}/${o}`,r,s);var V=async(e,t,o,r)=>e(`/v2/aggs/ticker/${t}/prev`,o,r);var B=(e,t,o)=>e("/v2/snapshot/locale/global/markets/crypto/tickers",t,o),X=(e,t,o,r)=>e(`/v2/snapshot/locale/global/markets/crypto/${t}`,o,r),J=(e,t,o,r)=>e(`/v2/snapshot/locale/global/markets/crypto/tickers/${t}`,o,r),Y=(e,t,o,r)=>e(`/v2/snapshot/locale/global/markets/crypto/tickers/${t}/book`,o,r);var Z=async(e,t,o)=>e("/v1/summaries",t,o);var l=async(e,t,o,r)=>e(`/v1/indicators/sma/${t}`,o,r);var K=async(e,t,o,r)=>e(`/v1/indicators/sma/${t}`,o,r);var y=async(e,t,o,r)=>e(`/v1/indicators/ema/${t}`,o,r);var ee=async(e,t,o,r)=>e(`/v1/indicators/ema/${t}`,o,r);var d=async(e,t,o,r)=>e(`/v1/indicators/macd/${t}`,o,r);var te=async(e,t,o,r)=>e(`/v1/indicators/macd/${t}`,o,r);var f=async(e,t,o,r)=>e(`/v1/indicators/rsi/${t}`,o,r);var re=async(e,t,o,r)=>e(`/v1/indicators/rsi/${t}`,o,r);var m=async(e,t,o)=>e("/v3/snapshot",t,o);var se=async(e,t,o)=>e("/v1/summaries",t,o);var O=(e,t="https://api.polygon.io",o)=>{let r=n(e,t,o);return{aggregates:(...s)=>W(r,...s),aggregatesGroupedDaily:(...s)=>N(r,...s),summaries:(...s)=>Z(r,...s),dailyOpenClose:(...s)=>z(r,...s),lastTrade:(...s)=>j(r,...s),trades:(...s)=>H(r,...s),previousClose:(...s)=>V(r,...s),snapshotAllTickers:(...s)=>B(r,...s),snapshotGainersLosers:(...s)=>X(r,...s),snapshotTicker:(...s)=>J(r,...s),snapshotTickerFullBookL2:(...s)=>Y(r,...s),sma:(...s)=>K(r,...s),ema:(...s)=>ee(r,...s),macd:(...s)=>te(r,...s),rsi:(...s)=>re(r,...s),universalSnapshot:(...s)=>m(r,...s)}};var oe=async(e,t,o,r,s,i,u,p)=>e(`/v2/aggs/ticker/${t}/range/${o}/${r}/${s}/${i}`,u,p);var ne=async(e,t,o,r)=>e(`/v2/aggs/grouped/locale/global/market/fx/${t}`,o,r);var ie=async(e,t,o,r,s)=>e(`/v1/conversion/${t}/${o}`,r,s);var ae=async(e,t,o,r)=>e(`/v3/quotes/${t}`,o,r);var ue=(e,t,o,r,s)=>e(`/v1/last_quote/currencies/${t}/${o}`,r,s);var pe=async(e,t,o,r)=>e(`/v2/aggs/ticker/${t}/prev`,o,r);var me=async(e,t,o)=>e("/v2/snapshot/locale/global/markets/forex/tickers",t,o),ce=async(e,t,o,r)=>e(`/v2/snapshot/locale/global/markets/forex/${t}`,o,r),Ie=async(e,t,o,r)=>e(`/v2/snapshot/locale/global/markets/forex/tickers/${t}`,o,r);var ge=async(e,t,o)=>e("/v1/summaries",t,o);var le=async(e,t,o,r)=>e(`/v1/indicators/sma/${t}`,o,r);var ye=async(e,t,o,r)=>e(`/v1/indicators/ema/${t}`,o,r);var de=async(e,t,o,r)=>e(`/v1/indicators/macd/${t}`,o,r);var fe=async(e,t,o,r)=>e(`/v1/indicators/rsi/${t}`,o,r);var v=(e,t="https://api.polygon.io",o)=>{let r=n(e,t,o);return{aggregates:(...s)=>oe(r,...s),aggregatesGroupedDaily:(...s)=>ne(r,...s),summaries:(...s)=>ge(r,...s),conversion:(...s)=>ie(r,...s),quotes:(...s)=>ae(r,...s),lastQuote:(...s)=>ue(r,...s),previousClose:(...s)=>pe(r,...s),snapshotAllTickers:(...s)=>me(r,...s),snapshotGainersLosers:(...s)=>ce(r,...s),snapshotTicker:(...s)=>Ie(r,...s),sma:(...s)=>le(r,...s),ema:(...s)=>ye(r,...s),macd:(...s)=>de(r,...s),rsi:(...s)=>fe(r,...s),universalSnapshot:(...s)=>m(r,...s)}};var be=async(e,t,o)=>e("/v3/reference/conditions",t,o);var xe=async(e,t,o)=>e("/v3/reference/exchanges",t,o);var he=async(e,t,o)=>e("/v1/marketstatus/upcoming",t,o);var ke=async(e,t,o)=>e("/v1/marketstatus/now",t,o);var Qe=(e,t,o,r)=>e(`/v3/reference/options/contracts/${t}`,o,r);var qe=(e,t,o)=>e("/v3/reference/options/contracts",t,o);var _e=async(e,t,o)=>e("/v3/reference/dividends",t,o);var Oe=async(e,t,o)=>e("/v3/reference/splits",t,o);var ve=async(e,t,o)=>e("/vX/reference/financials",t,o);var Re=async(e,t,o,r)=>e(`/v3/reference/tickers/${t}`,o,r);var Te=async(e,t,o)=>e("/v2/reference/news",t,o);var Ce=async(e,t,o)=>e("/v3/reference/tickers",t,o);var Pe=async(e,t,o)=>e("/v3/reference/tickers/types",t,o);var R=(e,t="https://api.polygon.io",o)=>{let r=n(e,t,o);return{conditions:(...s)=>be(r,...s),exchanges:(...s)=>xe(r,...s),marketHolidays:(...s)=>he(r,...s),marketStatus:(...s)=>ke(r,...s),optionsContract:(...s)=>Qe(r,...s),optionsContracts:(...s)=>qe(r,...s),dividends:(...s)=>_e(r,...s),stockSplits:(...s)=>Oe(r,...s),stockFinancials:(...s)=>ve(r,...s),tickerDetails:(...s)=>Re(r,...s),tickerNews:(...s)=>Te(r,...s),tickers:(...s)=>Ce(r,...s),tickerTypes:(...s)=>Pe(r,...s)}};var Se=async(e,t,o,r,s,i,u,p)=>e(`/v2/aggs/ticker/${t}/range/${o}/${r}/${s}/${i}`,u,p);var Ge=async(e,t,o,r,s)=>e(`/v1/open-close/${t}/${o}`,r,s);var Ae=async(e,t,o,r)=>e(`/v2/aggs/ticker/${t}/prev`,o,r);var De=async(e,t,o,r)=>e(`/v3/trades/${t}`,o,r);var we=async(e,t,o,r)=>e(`/v2/last/trade/${t}`,o,r);var $e=async(e,t,o,r)=>e(`/v3/quotes/${t}`,o,r);var b=async(e,t,o,r)=>e(`/v3/snapshot/options/${t}`,o,r),x=async(e,t,o,r,s)=>e(`/v3/snapshot/options/${t}/${o}`,r,s);var Le=async(e,t,o)=>e("/v1/summaries",t,o);var Fe=async(e,t,o,r)=>e(`/v1/indicators/sma/${t}`,o,r);var Ee=async(e,t,o,r)=>e(`/v1/indicators/ema/${t}`,o,r);var Ue=async(e,t,o,r)=>e(`/v1/indicators/macd/${t}`,o,r);var Me=async(e,t,o,r)=>e(`/v1/indicators/rsi/${t}`,o,r);var T=(e,t="https://api.polygon.io",o)=>{let r=n(e,t,o);return{aggregates:(...s)=>Se(r,...s),summaries:(...s)=>Le(r,...s),dailyOpenClose:(...s)=>Ge(r,...s),previousClose:(...s)=>Ae(r,...s),trades:(...s)=>De(r,...s),lastTrade:(...s)=>we(r,...s),quotes:(...s)=>$e(r,...s),snapshotOptionContract:(...s)=>x(r,...s),snapshotOptionChain:(...s)=>b(r,...s),sma:(...s)=>Fe(r,...s),ema:(...s)=>Ee(r,...s),macd:(...s)=>Ue(r,...s),rsi:(...s)=>Me(r,...s),universalSnapshot:(...s)=>m(r,...s)}};var h=async(e,t,o,r,s,i,u,p)=>e(`/v2/aggs/ticker/${t}/range/${o}/${r}/${s}/${i}`,u,p);var We=async(e,t,o,r)=>e(`/v2/aggs/grouped/locale/us/market/stocks/${t}`,o,r);var k=async(e,t,o,r,s)=>e(`/v1/open-close/${t}/${o}`,r,s);var Q=async(e,t,o,r)=>e(`/v2/aggs/ticker/${t}/prev`,o,r);var Ne=async(e,t,o,r)=>e(`/v2/last/nbbo/${t}`,o,r);var ze=async(e,t,o,r)=>e(`/v2/last/trade/${t}`,o,r);var He=async(e,t,o)=>e("/v2/snapshot/locale/us/markets/stocks/tickers",t,o),je=async(e,t,o,r)=>e(`/v2/snapshot/locale/us/markets/stocks/${t}`,o,r),Ve=async(e,t,o,r)=>e(`/v2/snapshot/locale/us/markets/stocks/tickers/${t}`,o,r);var Be=async(e,t,o,r)=>e(`/v3/quotes/${t}`,o,r);var Xe=async(e,t,o,r)=>e(`/v3/trades/${t}`,o,r);var C=(e,t="https://api.polygon.io",o)=>{let r=n(e,t,o);return{aggregates:(...s)=>h(r,...s),aggregatesGroupedDaily:(...s)=>We(r,...s),summaries:(...s)=>se(r,...s),dailyOpenClose:(...s)=>k(r,...s),lastQuote:(...s)=>Ne(r,...s),lastTrade:(...s)=>ze(r,...s),previousClose:(...s)=>Q(r,...s),quotes:(...s)=>Be(r,...s),snapshotAllTickers:(...s)=>He(r,...s),snapshotGainersLosers:(...s)=>je(r,...s),snapshotTicker:(...s)=>Ve(r,...s),sma:(...s)=>l(r,...s),ema:(...s)=>y(r,...s),macd:(...s)=>d(r,...s),rsi:(...s)=>f(r,...s),trades:(...s)=>Xe(r,...s),universalSnapshot:(...s)=>m(r,...s)}};var Je=async(e,t,o)=>e("/v3/snapshot/indices/",t,o);var P=(e,t="https://api.polygon.io",o)=>{let r=n(e,t,o);return{aggregates:(...s)=>h(r,...s),dailyOpenClose:(...s)=>k(r,...s),previousClose:(...s)=>Q(r,...s),snapshotTicker:(...s)=>Je(r,...s),sma:(...s)=>l(r,...s),ema:(...s)=>y(r,...s),macd:(...s)=>d(r,...s),rsi:(...s)=>f(r,...s)}};var Ye=(e,t,o)=>({crypto:O(e,t,o),forex:v(e,t,o),reference:R(e,t,o),options:T(e,t,o),stocks:C(e,t,o),indices:P(e,t,o)}),Ze=Ye;var Ke=F(require("websocket"),1),a=(e,t)=>{if(!t)throw new Error("api key not provided.");let o=new Ke.default.w3cwebsocket(e);return o.onopen=()=>{o.send(JSON.stringify({action:"auth",params:t}))},o};var S=(e,t="wss://socket.polygon.io")=>a(`${t}/crypto`,e);var G=(e,t="wss://socket.polygon.io")=>a(`${t}/forex`,e);var A=(e,t="wss://socket.polygon.io")=>a(`${t}/indices`,e);var D=(e,t="wss://socket.polygon.io")=>a(`${t}/options`,e);var w=(e,t="wss://socket.polygon.io")=>a(`${t}/stocks`,e);var et=(e,t)=>({crypto:()=>S(e,t),forex:()=>G(e,t),indices:()=>A(e,t),options:()=>D(e,t),stocks:()=>w(e,t)}),tt=et;var rt=(e,t,o)=>({rest:Ze(e,t),websockets:tt(e,o)}),mt=rt;0&&(module.exports={cryptoClient,forexClient,getCryptoWebsocket,getForexWebsocket,getIndicesWebsocket,getOptionsWebsocket,getStocksWebsocket,getWithGlobals,indicesClient,optionsClient,polygonClient,referenceClient,restClient,snapshotOptionChain,snapshotOptionContract,stocksClient,websocketClient});
